
<div class="page-body"> <!--TOP BAR MENU PANEL START -->

    <!--PAGE TITLE START -->
    <div class="page-title">
        <div class="title-env">
            <h1 class="title">View Dispatch List</h1>
            <p class="description">View All Dispatches</p>
        </div>
    </div>
    <!--PAGE TITLE END -->

    <div class="row">
        <div class="col-md-12">            
            <div class="panel panel-default">
                <div>
                    <form class="form-horizontal">                                            
                        <div class="panel-body pad_top0 pad0">
                            <div class="row">                            
                                <div class="col-sm-12">
                                    <div class="form-group col-sm-3 pad0">
                                        <label class="col-sm-7 control-label"><span style="float:left;">Show Entries</span></label>
                                        <div class="col-sm-5 pad_lf0">
                                            <select class="form-control input-sm" ng-model="viewDispatch.searchParams.limit">
                                                <option value="10">10</option>
                                                <option value="25">25</option>
                                                <option value="50">50</option>
                                                <option value="100">100</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-4 col-sm-12 col-xs-12 pad0" style="padding-right: 30px!important">
                                        <div class="col-md-5 col-xs-6  pad0  pull-right" >
                                            <div class="form-group" >
                                                <label for='toDate' class="col-md-1 col-xs-2 control-label form-control-static"><i class="linecons-calendar"></i></label>
                                                <div class="col-md-7 col-xs-8 pad_rg0 pad_lf0">
                                                    <input readonly style="border:none;pointer-events: none;width:100px" type="text" placeholder='End Date' id="toDate" class="form-control datepicker readonly-datepicker" data-format="mm/dd/yyyy" ng-model="viewDispatch.searchParams.toDate" max-date="viewDispatch.searchParams.endDate" name='toDate' ng-change="viewDispatch.applySearch()">
                                                </div>
                                                <span class="col-md-1 col-xs-2 form-control-static pad_rg0 pad_lf0" ng-show="viewDispatch.searchParams.toDate" ><i class="fa fa-remove" ng-click="viewDispatch.searchParams.toDate = undefined;viewDispatch.applySearch()"></i></span>
                                            </div>
                                        </div>    
                                        <div class="col-md-1 col-xs-1 center pad0  pull-right">
                                            <label class="control-label form-control-static" style="color:#7F7B77">
                                                To
                                            </label>
                                        </div>
                                        <div class="col-md-5 col-xs-5 pad0  pull-right">
                                            <div class="form-group" >
                                                <label for='fromDate' class="col-md-1 col-xs-2 control-label form-control-static"><i class="linecons-calendar"></i></label>
                                                <div class="col-md-7 col-xs-8  pad_rg0 pad_lf0">
                                                    <input readonly style="border:none;pointer-events: none;width:100px;" type="text" placeholder='Start Date' id="fromDate" class="form-control datepicker readonly-datepicker" data-format="mm/dd/yyyy" ng-model="viewDispatch.searchParams.fromDate" max-date="viewDispatch.searchParams.endDate" name='fromDate' ng-change="viewDispatch.applySearch()">
                                                </div>
                                                <span class="col-md-1 col-xs-1 form-control-static pad_rg0 pad_lf0" ng-show="viewDispatch.searchParams.fromDate" ><i class="fa fa-remove" ng-click="viewDispatch.searchParams.fromDate = undefined;viewDispatch.applySearch()"></i></span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group col-md-6 col-sm-12 pad0 pull-right">
                                        
                                        <div class='form-group col-md-5 col-sm-12 col-xs-12'>
                                            <select class="form-control input-sm" ng-model="viewDispatch.searchParams.status"  ng-change="viewDispatch.applySearch()">
                                                <option value="">ALL</option>
                                                <option value="active">Active</option>
                                                <option value="inactive">Inactive</option>
                                                <option value="expired">Expired</option>
                                                <option value="completed">Completed</option>
                                            </select>                                            
                                        </div>
                                        <div class="col-md-1 col-sm-12 col-xs-12"></div>
                                         <div class="form-group col-md-7 col-sm-12 col-xs-12">
                                            <input type="search" class="form-control input-sm" ng-model="viewDispatch.searchParams.searchString" placeholder="Search by Patient Name" ng-change="viewDispatch.applySearch()">
                                        </div>
                                    </div>                                     
                                </div>   
                            </div>

                            <div class="row">  </div>
                            <div class="dataTables_wrapper form-inline dt-bootstrap">
                                <div class="table-responsive scroll row">

                                    <table id="example-1" ng-if="viewDispatch.dispatchList.length" class="table table-striped table-bordered  table table-small-font" cellspacing="0">
                                        <thead>
                                            <tr>
                                                <th width="25%" ng-class="viewDispatch.applySortingClass('patientName')" ng-click="viewDispatch.applySorting('patientName')" >Patient
                                                </th>
                                                <th width="15%" ng-class="viewDispatch.applySortingClass('dispatchCreatedOn')" ng-click="viewDispatch.applySorting('dispatchCreatedOn')" >Date
                                                </th>
                                                <th width="10%">Total Recipients</th>
                                                <th width="25%">Assigned employee</th>
                                                <th width="10%">Status</th>
                                                <th width="20%">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr pagination-id="drinksPagination" dir-paginate="dispatch in viewDispatch.dispatchList| itemsPerPage: viewDispatch.searchParams.limit" 
                                                total-items="totalRecords"
                                                current-page="viewDispatch.searchParams.pageNo">
                                                <td> 

                                                    <b>{{dispatch.patientName}}</b>{{dispatch.careType?" - "+dispatch.careType:""}}
                                                </td>
                                                <td>{{dispatch.dispatchCreatedOn}}</td>
                                                <td>
                                                    {{dispatch.totalRecipient}}
                                                </td>
                                                <td>{{dispatch.assignedEmployeeName}}</td>
                                                <td style="text-transform: capitalize;">{{dispatch.status}}</td>
                                                <td>
                                                    <div class="center">
                                                        <a class="btn icon-left fa fa-edit deactivate_bt" ng-if="hasAccess('EDIT_DISPATCH')" ng-href="{{'#/app/dispatch-info/' + dispatch.id}}" tooltip="Edit"><span class="ed_b"></span></a>
                                                        <a class="btn icon-left fa fa-ban deactivate_bt" href="" ng-if="hasAccess('DEACTIVATE_DISPATCH') && dispatch.status === 'active'" ng-click="viewDispatch.openStatusModal(dispatch, 'inactive')" tooltip="Deactivate"><span class="ed_b"></span></a>
                                                        <a class="btn icon-left fa fa-check edit_button" href="" ng-if="hasAccess('DEACTIVATE_DISPATCH') && dispatch.status === 'inactive'" ng-click="viewDispatch.openStatusModal(dispatch, 'active')" tooltip="Activate"><span class="ed_b"></span></a>
                                                        <a class="btn icon-left fa fa-trash-o delete_button" ng-if="hasAccess('DELETE_DISPATCH')" href="" ng-click="viewDispatch.openDeleteModal(dispatch)" tooltip="Delete"><span class="ed_b"></span></a>                                                    
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <script type="text/javascript">
                                    // This JavaScript Will Replace Checkboxes in dropdown toggles
                                    jQuery(document).ready(function ($)
                                    {
                                        setTimeout(function ()
                                        {
                                            $(".checkbox-row input").addClass('cbr');
                                            cbr_replace();
                                        }, 0);
                                    });
                                </script>

                            </div>
                            <div ng-show="viewDispatch.dispatchList.length">
                                <div id="paginationButtons" class="text-right">
                                    <dir-pagination-controls boundary-links="true" 
                                                             max-size="9"
                                                             template-url="app/tpls/dirPagination.tpl.html" pagination-id="drinksPagination" on-page-change="viewDispatch.pageChanged(newPageNumber)"></dir-pagination-controls>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>