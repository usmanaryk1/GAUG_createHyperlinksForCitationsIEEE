<div class="page-body"> 
    <!--PAGE TITLE START -->
    <div class="page-title">
        <div class="title-env">
            <h1 class="title">View Employee Time Sheets</h1>
            <p class="description">View Employees Punchin/Punchout Records </p>
        </div>
    </div>
    <!--PAGE TITLE END -->
    <div class="row">
        <div class="col-sm-12">
            <div class="panel panel-default">
                <div class="panel-body">
                    <form class="form-horizontal" role="form">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="col-sm-4 pad_lf0" style="margin-top:-15px; cursor: pointer;"  ng-click="empTimesheet.openEditModal(empTimesheet.selectedEmployee, 'modal-5')">
                                    <div class="user_p mar_bt0">
                                        <img alt="user" class="img-cirlce img-responsive" ng-show="hideDefaultImage" imageonload="hideDefaultImage" src="assets/images/user-5.png" ng-src="{{(empTimesheet.selectedEmployee.profileImage != null && empTimesheet.selectedEmployee.profileImage != '') ? (empTimesheet.baseUrl + 'file/download/' + empTimesheet.companyCode + '/a/' + empTimesheet.selectedEmployee.profileImage) : ('assets/images/user-5.png')}}"> 
                                        <img alt="user" class="img-cirlce img-responsive" ng-hide="hideDefaultImage" src="assets/images/loading.gif"/>
                                    </div>
                                    <div class="user_av_hd">
                                        <h1>{{empTimesheet.selectedEmployee.fName + ' ' + empTimesheet.selectedEmployee.lName}}</h1>
                                        <p>{{positions[empTimesheet.selectedEmployee.position]}}</p>
                                    </div>
                                </div>
                                <div class="col-sm-7 pull-right pad0 wd_full">
                                    <div class="form-group ">
                                        <label class="col-sm-3 control-label">Employee Name</label>
                                        <div class="col-sm-9">
                                            <!--                                            <script type="text/javascript">
                                                                                            jQuery(document).ready(function($)
                                                                                            {
                                                                                                $("#sboxit-2").selectBoxIt().on('open', function()
                                                                                                {
                                                                                                    // Adding Custom Scrollbar
                                                                                                    $(this).data('selectBoxSelectBoxIt').list.perfectScrollbar();
                                                                                                });
                                                                                            });
                                                                                        </script>-->
                                            <select class="form-control" id="sboxit-2" ng-model="empTimesheet.emp" ng-options='emp as (emp.fName+" "+emp.lName) for emp in empTimesheet.employeeList'>
                                            </select>
                                            <!--<input type="text" class="form-control" ng-model="empTimesheet.searchValue" ng-change="empTimesheet.filterTimesheet()">-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 pad0">
                                <div class="form-group col-sm-5 pull-left">
                                    <label class="col-sm-4 control-label pull-left" style="min-width:110px;"><span style="float:left;">Show Entries</span></label>
                                    <div style="width:70px; float:left;">
                                        <select class="form-control" ng-model="empTimesheet.viewRecords" ng-change="empTimesheet.changeViewRecords()">
                                            <option value="10">10</option>
                                            <option value="25">25</option>
                                            <option value="50">50</option>
                                            <option value="100">100</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-6 pull-right wd_full pad0">
                                    <div class="col-sm-6 pad0 wd_full">
                                        <div class="form-group">
                                            <label for="field-68" class="col-sm-3 control-label">From</label>
                                            <div class="col-sm-9">
                                                <div class="input-group">
                                                    <input type="text" id="field-68" class="form-control datepicker" data-format="mm/dd/yyyy" ng-model="empTimesheet.searchParams.startDate" max-date="empTimesheet.searchParams.endDate">
                                                    <div class="input-group-addon"> <a href="#"><i class="linecons-calendar"></i></a> </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 ">
                                        <div class="form-group">
                                            <label for="field-69" class="col-sm-3 control-label">To</label>
                                            <div class="col-sm-9 pad_lf0">
                                                <div class="input-group">
                                                    <input type="text" id="field-69" class="form-control datepicker" data-format="mm/dd/yyyy" ng-model="empTimesheet.searchParams.endDate" min-date="empTimesheet.searchParams.startDate">
                                                    <div class="input-group-addon"> <a href="#"><i class="linecons-calendar"></i></a> </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 pad0">
                                <div class="col-sm-6 pull-right">
                                    <button type="button" class="btn btn-info green_bt pull-right"  ng-click="empTimesheet.selectEmployee(empTimesheet.emp);
                                        empTimesheet.filterTimesheet()" style="width:auto;">Review</button>
                                    <a href="#/app/manual_punch/employee/{{empTimesheet.emp.id}}" class="btn btn-info btn-single process_bt pull-right mar_rg5">Manual Punch</a>
                                    <button class="btn btn-info btn-single gray_bt pull-right" type="button" ng-click="empTimesheet.resetFilters()">
                                        Reset Filters
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 pad0">
                            <div class="table-responsive scroll search_hide" data-pattern="priority-columns" data-focus-btn-icon="fa-asterisk" data-sticky-table-header="true" data-add-display-all-btn="true" data-add-focus-btn="true"> 
                                <table id="example-1" class="table table-striped table-bordered table table-small-font table-bordered table-striped" ng-if="empTimesheet.timesheetList.length" datatable-setup cellspacing="0" datatable-obj="empTimesheet.datatableObj">
                                    <thead>
                                        <tr>
                                            <th width="17%" colspan="1" rowspan="1" aria-controls="example-1"  aria-label="Position: activate to sort column ascending" tabindex="0" nowrap><span style="padding-right:10px;">Date</span></th>
                                            <th width="13%" colspan="1" rowspan="1" aria-controls="example-1"  aria-label="Position: activate to sort column ascending" tabindex="0" nowrap><span style="padding-right:10px;">Time In</span></th>
                                            <th width="13%" colspan="1" rowspan="1" aria-controls="example-1"  aria-label="Position: activate to sort column ascending" tabindex="0" nowrap><span style="padding-right:10px;">Time Out</span></th>
                                            <th width="13%" colspan="1" rowspan="1" aria-controls="example-1" aria-label="Name: activate to sort column ascending"  aria-sort="ascending" tabindex="0" nowrap><span style="padding-right:10px;">Hours</span></th>

                                            <th width="26%" colspan="1" rowspan="1" aria-controls="example-1"  aria-label="Position: activate to sort column ascending" tabindex="0" nowrap><span style="padding-right:10px;">Patient Name</span></th>
                                            <th width="18%" data-priority="6" nowrap><span style="padding-right:10px;">Actions</span></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="timesheet in empTimesheet.timesheetList">
                                            <th>
                                                {{timesheet.punchInTime|timesheetformat}} - {{timesheet.punchInTime|date :dateFormat}}
                                            </th>
                                            <td>
                                                <!--Display green dot for matched GPS location-->
                                                <!--<div class="green_dot"></div>-->
                                                <!--Display red dot for not matched GPS location-->
                                                <!--<div class="red_dot"></div>-->
                                                <div class="black_dot"></div>
                                                {{timesheet.punchInTime|date :timeFormat}}
                                            </td>
                                            <td>
                                                <div class="black_dot"></div>
                                                {{timesheet.punchOutTime|date :timeFormat}}
                                            </td>
                                            <td>
                                                {{timesheet.punchInTime|duration:timesheet.punchOutTime}}
                                            </td>
                                            <td>
                                                {{timesheet.patientId.fName + " " + timesheet.patientId.lName}}
                                            </td>
                                            <td>
                                                <div style="float:left; min-width:170px;">
                                                    <a class="btn icon-left fa fa-pencil edit_button" href="#/app/edit_timesheet/{{timesheet.id}}"  tooltip="Edit"><span class="ed_b"></span></a> 
                                                    <a class="btn icon-left fa fa-trash-o delete_button" href="" ng-click="empTimesheet.openDeleteModal(timesheet, 'deleteModel')" tooltip="Delete"><span class="ed_b"></span></a> 
                                                    <a class="btn icon-left fa fa-search view_task_button" href="" ng-click="empTimesheet.openTaskListModal('modal-3', 'lg', 'static', timesheet.tasks);" tooltip="View Tasks"><span class="ed_b"></span></a>
                                                </div>
                                            </td>
                                        </tr>
                                        <!--                                        <tr>
                                                                                    <th>11/28/2008</th>
                                                                                    <td><div class="green_dot"></div>
                                                                                        09:20 AM</td>
                                                                                    <td><div class="red_dot"></div>
                                                                                        06:00 PM</td>
                                                                                    <td>09:00</td>
                                                                                    <td>Capoblanco Anne</td>
                                                                                    <td><div style="float:left; min-width:170px;">
                                                                                            <a class="btn icon-left fa fa-pencil edit_button" href="#"><span class="ed_b">Edit</span></a> 
                                                                                            <a class="btn icon-left fa fa-trash-o delete_button" href="#"><span class="ed_b">Dlt</span></a> 
                                                                                            <a class="btn icon-left fa fa-search view_task_button" href="#"><span class="ed_b">Tasks </span></a>
                                                                                        </div></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <th>11/28/2008</th>
                                                                                    <td><div class="black_dot"></div>
                                                                                        09:00 AM</td>
                                                                                    <td><div class="black_dot"></div>
                                                                                        06:30 PM</td>
                                                                                    <td>09:00</td>
                                                                                    <td>Capoblanco Anne</td>
                                                                                    <td><div style="float:left; min-width:170px;">
                                                                                            <a class="btn icon-left fa fa-pencil edit_button" href="#"><span class="ed_b">Edit</span></a> 
                                                                                            <a class="btn icon-left fa fa-trash-o delete_button" href="#"><span class="ed_b">Dlt</span></a> 
                                                                                            <a class="btn icon-left fa fa-search view_task_button" href="#"><span class="ed_b">Tasks </span></a>
                                                                                        </div></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <th>11/28/2008</th>
                                                                                    <td><div class="green_dot"></div>
                                                                                        09:00 AM</td>
                                                                                    <td><div class="green_dot"></div>
                                                                                        06:00 PM</td>
                                                                                    <td>09:00</td>
                                                                                    <td>Capoblanco Anne</td>
                                                                                    <td><div style="float:left; min-width:170px;">
                                                                                            <a class="btn icon-left fa fa-pencil edit_button" href="#"><span class="ed_b">Edit</span></a> 
                                                                                            <a class="btn icon-left fa fa-trash-o delete_button" href="#"><span class="ed_b">Dlt</span></a> 
                                                                                            <a class="btn icon-left fa fa-search view_task_button" href="#"><span class="ed_b">Tasks </span></a>
                                                                                        </div></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <th>11/28/2008</th>
                                                                                    <td> 09:00 AM</td>
                                                                                    <td> 06:00 PM</td>
                                                                                    <td>09:00</td>
                                                                                    <td>Capoblanco Anne</td>
                                                                                    <td><div style="float:left; min-width:170px;">
                                                                                            <a class="btn icon-left fa fa-pencil edit_button" href="#"><span class="ed_b">Edit</span></a> 
                                                                                            <a class="btn icon-left fa fa-trash-o delete_button" href="#"><span class="ed_b">Dlt</span></a> 
                                                                                            <a class="btn icon-left fa fa-search view_task_button" href="#"><span class="ed_b">Tasks </span></a>
                                                                                        </div></td>
                                                                                </tr>-->
                                    </tbody>
                                </table>
                                <div ng-if="(empTimesheet.timesheetList == null || empTimesheet.timesheetList.length == 0) && empTimesheet.dataRetrieved">
                                    No timesheet available for selected employee.
                                </div>

                                <table width="100%"  class="table table-small-font table-bordered table-striped" cellspacing="0" ng-if="(empTimesheet.timesheetList.length > 0) && empTimesheet.dataRetrieved">
                                    <tbody>
                                        <tr style="border:0px !important;">
                                            <td width="25%"  class="border0 total" align="right">Total</td>
                                            <td width="25%"  class="border0 total" align="left"><span ng-bind="empTimesheet.timesheetList | durationtotal"></span> HRS</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </form>
                </div>
                <!--                <div class="panel-body pad_top0">
                                    <div id="example-1_wrapper" class="dataTables_wrapper form-inline dt-bootstrap"><script type="text/javascript">
                                        // This JavaScript Will Replace Checkboxes in dropdown toggles
                                        jQuery(document).ready(function($)
                                        {
                                            setTimeout(function()
                                            {
                                                $(".checkbox-row input").addClass('cbr');
                                                cbr_replace();
                                            }, 0);
                                        });
                                        </script>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="time_sh_bt_buttons">
                                                    <button style="width:auto;" class="btn btn-info green_bt pull-left" type="button">&laquo; Previous</button>
                                                    <button style="width:auto;" class="btn btn-info green_bt pull-left" type="button">Next &raquo;</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>-->
            </div>
        </div>
    </div>
</div>
<script type="text/ng-template" id="modal-3">
    <div class="modal-header">
    <h4 class="modal-title">Task List</h4>
    </div>

    <div class="modal-body">
    <div class="row">

    <div class="col-sm-12" ng-repeat="task in taskListModal.taskList" ng-if="taskListModal.taskList!=null && taskListModal.taskList.length>0">
    <div>
    {{task.companyTasksId.task}}
    </div>
    </div>
    <div class="col-sm-12" ng-if="taskListModal.taskList==null || taskListModal.taskList.length==0">
    No tasks are available.
    
            </div>
    </div>
    </div>

    <div class="modal-footer">
    <button type="button" class="btn btn-white" ng-click="taskListModal.close();">Close</button>
    </div>
</script>
<script type="text/ng-template" id="deleteModel">
    <div class="modal-header">		
    <h4 class="modal-title">{{deletePunchModal.punchObj.punchInTime|timesheetformat}} - {{deletePunchModal.punchObj.punchInTime|date :dateFormat}} - {{deletePunchModal.punchObj.punchInTime|date :timeFormat}} to {{deletePunchModal.punchObj.punchOutTime|date :timeFormat}}</h4>
    </div>

    <div class="modal-body">

    Are you sure you want to delete this Punch record?

    </div>

    <div class="modal-footer">
    <button type="button" class="btn btn-success" ng-click="deletePunchModal.delete(deletePunchModal.punchObj);">Yes</button>
    <button type="button" class="btn btn-red" ng-click="deletePunchModal.dismiss();">No</button>
    </div>
</script>

<script type="text/ng-template" id="modal-5">
    <div class="modal-body">
    <div class="row">
    <div class="user_panel col-md-12">
    <div class="user_img"> <img alt="user" class="img-cirlce img-responsive" src="assets/images/user-5.png" ng-src="{{(selectEmployeeModel.employee.profileImage!=null && selectEmployeeModel.employee.profileImage!='') ?(selectEmployeeModel.baseUrl+'file/download/'+selectEmployeeModel.companyCode+'/a/'+selectEmployeeModel.employee.profileImage):('assets/images/user-5.png')}}"> </div>
    <div class="emp_user_hd">
    <div class="emp_user_name">{{selectEmployeeModel.employee.lName}}, {{selectEmployeeModel.employee.fName}} {{selectEmployeeModel.employee.middleInitial}}</div>
    <p>{{positions[selectEmployeeModel.employee.position]}}</p>
    </div>
    <button type="button" class="close" ng-click="selectEmployeeModel.close();" aria-hidden="true">&times;</button>
    </div>

    </div>
    <hr/>
    <div class="row">
    <div class="col-md-12">

    <div class="form-group">
    <label for="field-1" class="control-label col-md-4"><strong>Position</strong></label>
    <div class="col-md-8">
    {{positions[selectEmployeeModel.employee.position]}} 
    </div>
    </div>	

    </div>
    </div>
    <div class="row">
    <div class="col-md-12">

    <div class="form-group">
    <label for="field-1" class="control-label col-md-4"><strong>Phone Number</strong></label>
    <div class="col-md-8">
    {{selectEmployeeModel.employee.phone | tel}} 
    </div>
    </div>	

    </div>
    </div>
    <div class="row">
    <div class="col-md-12">

    <div class="form-group">
    <label for="field-1" class="control-label col-md-4"><strong>Address</strong></label>
    <div class="col-md-8">
    {{selectEmployeeModel.employee.address1}}<div ng-if="selectEmployeeModel.employee.address2 != null">{{selectEmployeeModel.employee.address2}}</div><div>  {{selectEmployeeModel.employee.city}}, {{selectEmployeeModel.employee.state}}, {{selectEmployeeModel.employee.zipcode}}</div>
    </div>
    </div>	

    </div>
    </div>
    <div class="row">
    <div class="col-md-12">

    <div class="form-group">
    <label for="field-1" class="control-label col-md-4"><strong>Date Of Birth</strong></label>
    <div class="col-md-8">
    {{selectEmployeeModel.employee.dateOfBirth|date :dateFormat}} 
    </div>
    </div>	

    </div>
    </div>
    <div class="row">
    <div class="col-md-12">

    <div class="form-group">
    <label for="field-1" class="control-label col-md-4"><strong>Social Security Number</strong></label>
    <div class="col-md-8">
    {{selectEmployeeModel.employee.ssn | ssn}} 
    </div>
    </div>	

    </div>
    </div>

    <div class="modal-footer">
    <button type="button" class="btn btn-white" ng-click="selectEmployeeModel.close();">Close</button>
    </div>
</script>